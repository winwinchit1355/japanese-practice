<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      /* layout baseline: prevent horizontal overflow */
      * {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
      }

      .section {
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 24px;
      }

      /* practise UI styles */
      .practise {
        background: #ffffff;
        padding: 18px;
        border-radius: 10px;
        box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
        max-width: 420px;
        width: 100%;
        height: 60vh;
      }

      .text-center{
        text-align: center;
      }
      /* Tabs */
      .tabs {
        display: flex;
        gap: 8px;
        justify-content: center;
        margin-bottom: 12px;
        font-size: 18px; /* increased font size for tabs */
        position: relative;
        padding-bottom: 12px; /* space for the HR-style line */
      }
      .tab {
        appearance: none;
        -webkit-appearance: none;
        border: 1px solid transparent;
        background: transparent;
        padding: 8px 14px;
        border-radius: 9999px;
        font-weight: 700;
        /* no text underline ‚Äî we use an HR below the tabs instead */
        cursor: pointer;
        color: #374151;
        transition: background 0.12s ease, box-shadow 0.12s ease, transform 0.08s ease;
      }

      /* HR-style underline under the tab bar */
      .tabs::after {
        content: "";
        position: absolute;
        left: 12px;
        right: 12px;
        bottom: 0;
        height: 2px;
        background: #e5e7eb;
        border-radius: 2px;
      }
      .tab:hover {
        transform: translateY(-1px);
      }
      .tab:focus {
        outline: 3px solid rgba(99,102,241,0.12);
        outline-offset: 2px;
      }
      .tab.active {
        background: linear-gradient(180deg,#eef2ff,#e0e7ff);
        border-color: rgba(99,102,241,0.18);
        box-shadow: 0 6px 18px rgba(14,30,60,0.06);
        color: #1f2937;
      }

      /* input group (word count) */
      .input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
        margin-bottom: 15px;
      }

      .input-group label {
        font-size: 14px;
        color: #374151;
      }
      .input-group input {
        width: 80px;
        padding: 6px 8px;
        border-radius: 6px;
        border: 1px solid #e5e7eb;
        font-size: 16px;
        background: #fff;
      }

      /* place input inline with buttons on wide screens */
      @media (min-width: 520px) {
        .button-row {
          display: flex;
          gap: 12px;
          align-items: center;
          justify-content: center;
        }
      }

      .romaji,
      .kana {
        display: flex;
        flex-direction: column;
      }

      .button-group {
        display: flex;
        gap: 8px;
        justify-content: center;
        margin-bottom: 12px;
        flex-wrap: wrap;
      }

      .button-group button {
        padding: 8px 14px;
        border-radius: 8px;
        border: 1px solid #e6e9ef;
        background: #f8fafc;
        cursor: pointer;
        font-weight: 600;
        font-size: 24px;
        margin-bottom: 20px;
        transition: transform 0.08s ease, box-shadow 0.12s ease,
          background 0.12s ease;
        box-shadow: 0 1px 0 rgba(2, 6, 23, 0.04);
      }
      /* add small hand icon before interactive buttons */
      .button-group button::before {
        content: "\1F449"; /* üëâ */
        display: inline-block;
        margin-right: 8px;
        font-size: 18px;
        line-height: 1;
        vertical-align: middle;
      }
      .button-group button:hover {
        background: #eef2ff;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(14, 30, 60, 0.06);
      }
      .button-group button:focus {
        outline: 3px solid rgba(99, 102, 241, 0.12);
        outline-offset: 3px;
      }
      .button-group button:active {
        transform: translateY(1px);
      }
      /* show-answer button highlight */
      .show-ans-kana,
      .show-ans-romaji {
        transition: background 0.12s ease, box-shadow 0.12s ease,
          transform 0.08s ease;
      }
      .show-ans-kana:hover,
      .show-ans-romaji:hover {
        background: #f1f5f9;
        transform: translateY(-1px);
        box-shadow: 0 6px 14px rgba(2, 6, 23, 0.04);
      }
      .show-ans-kana:focus,
      .show-ans-romaji:focus {
        outline: 3px solid rgba(99, 102, 241, 0.12);
        outline-offset: 2px;
      }
      /* disabled visual */
      button[disabled],
      .show-ans-kana[disabled],
      .show-ans-romaji[disabled] {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      /* add hand icon to show-answer buttons too */
      .show-ans-kana::before,
      .show-ans-romaji::before {
        content: "\1F449"; /* üëâ */
        display: inline-block;
        margin-right: 8px;
        font-size: 16px;
        line-height: 1;
        vertical-align: middle;
      }
      .romaji,
      .kana {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: center;
        margin: 8px 0;
      }
      .romaji-word,
      .kana-word {
        display: inline-block;
        min-width: 64px;
        text-align: center;
        font-size: 30px;
        font-weight: 700;
      }
      .show-ans-kana,
      .show-ans-romaji {
        padding: 6px 10px;
        border-radius: 6px;
        border: 1px solid #d1d5db;
        background: #fff;
        cursor: pointer;
      }
      .kana-ans,
      .romaji-ans {
        margin-left: 8px;
        font-size: 30px;
        font-weight: 700;
      }
      /* hide answer UI initially */
      .show-ans-kana,
      .show-ans-romaji,
      .kana-ans,
      .romaji-ans {
        display: none;
      }
      /* small responsiveness */
      @media (max-width: 480px) {
        .practise {
          padding: 12px;
        }
        .romaji-word,
        .kana-word {
          font-size: 22px;
        }
      }
    </style>
  </head>
  <body>
    <div class="section">
      <div class="practise">
        <div class="tabs" role="tablist" aria-label="Script tabs">
          <button class="tab active" data-script="hiragana" role="tab" aria-selected="true">Hiragana</button>
          <button class="tab" data-script="katakana" role="tab" aria-selected="false">Katakana</button>
        </div>
        <div class="input-group">
          <label for="">Word Count</label>
          <input
            type="number"
            class="word-count"
            placeholder="Word Count"
            value="1"
          />
        </div>
        <div class="button-group">
          <button class="kana-btn">Kana</button>
          <button class="romaji-btn">Romaji</button>
        </div>
        <div class="romaji">
          <span class="romaji-word"> a </span>
          <button class="show-ans-kana">Show Answer</button>
          <span class="kana-ans"> „ÅÇ </span>
        </div>
        <div class="kana">
          <span class="kana-word"> „ÅÇ </span>
          <button class="show-ans-romaji">Show Answer</button>
          <span class="romaji-ans"> a </span>
        </div>
      </div>
    </div>

    <script>
      var hiragana = [
        { kana: "„ÅÇ", romaji: "a" },
        { kana: "„ÅÑ", romaji: "i" },
        { kana: "„ÅÜ", romaji: "u" },
        { kana: "„Åà", romaji: "e" },
        { kana: "„Åä", romaji: "o" },
        { kana: "„Åã", romaji: "ka" },
        { kana: "„Åç", romaji: "ki" },
        { kana: "„Åè", romaji: "ku" },
        { kana: "„Åë", romaji: "ke" },
        { kana: "„Åì", romaji: "ko" },
        { kana: "„Åï", romaji: "sa" },
        { kana: "„Åó", romaji: "shi" },
        { kana: "„Åô", romaji: "su" },
        { kana: "„Åõ", romaji: "se" },
        { kana: "„Åù", romaji: "so" },
        { kana: "„Åü", romaji: "ta" },
        { kana: "„Å°", romaji: "chi" },
        { kana: "„Å§", romaji: "tsu" },
        { kana: "„Å¶", romaji: "te" },
        { kana: "„Å®", romaji: "to" },
        { kana: "„Å™", romaji: "na" },
        { kana: "„Å´", romaji: "ni" },
        { kana: "„Å¨", romaji: "nu" },
        { kana: "„Å≠", romaji: "ne" },
        { kana: "„ÅÆ", romaji: "no" },
        { kana: "„ÅØ", romaji: "ha" },
        { kana: "„Å≤", romaji: "hi" },
        { kana: "„Åµ", romaji: "fu" },
        { kana: "„Å∏", romaji: "he" },
        { kana: "„Åª", romaji: "ho" },
        { kana: "„Åæ", romaji: "ma" },
        { kana: "„Åø", romaji: "mi" },
        { kana: "„ÇÄ", romaji: "mu" },
        { kana: "„ÇÅ", romaji: "me" },
        { kana: "„ÇÇ", romaji: "mo" },
        { kana: "„ÇÑ", romaji: "ya" },
        { kana: "„ÇÜ", romaji: "yu" },
        { kana: "„Çà", romaji: "yo" },
        { kana: "„Çâ", romaji: "ra" },
        { kana: "„Çä", romaji: "ri" },
        { kana: "„Çã", romaji: "ru" },
        { kana: "„Çå", romaji: "re" },
        { kana: "„Çç", romaji: "ro" },
        { kana: "„Çè", romaji: "wa" },
        { kana: "„Çí", romaji: "wo" },
        { kana: "„Çì", romaji: "n" },
      ];
      var katakana = [
        { kana: "„Ç¢", romaji: "a" },
        { kana: "„Ç§", romaji: "i" },
        { kana: "„Ç¶", romaji: "u" },
        { kana: "„Ç®", romaji: "e" },
        { kana: "„Ç™", romaji: "o" },
        { kana: "„Ç´", romaji: "ka" },
        { kana: "„Ç≠", romaji: "ki" },
        { kana: "„ÇØ", romaji: "ku" },
        { kana: "„Ç±", romaji: "ke" },
        { kana: "„Ç≥", romaji: "ko" },
        { kana: "„Çµ", romaji: "sa" },
        { kana: "„Ç∑", romaji: "shi" },
        { kana: "„Çπ", romaji: "su" },
        { kana: "„Çª", romaji: "se" },
        { kana: "„ÇΩ", romaji: "so" },
        { kana: "„Çø", romaji: "ta" },
        { kana: "„ÉÅ", romaji: "chi" },
        { kana: "„ÉÑ", romaji: "tsu" },
        { kana: "„ÉÜ", romaji: "te" },
        { kana: "„Éà", romaji: "to" },
        { kana: "„Éä", romaji: "na" },
        { kana: "„Éã", romaji: "ni" },
        { kana: "„Éå", romaji: "nu" },
        { kana: "„Éç", romaji: "ne" },
        { kana: "„Éé", romaji: "no" },
        { kana: "„Éè", romaji: "ha" },
        { kana: "„Éí", romaji: "hi" },
        { kana: "„Éï", romaji: "fu" },
        { kana: "„Éò", romaji: "he" },
        { kana: "„Éõ", romaji: "ho" },
        { kana: "„Éû", romaji: "ma" },
        { kana: "„Éü", romaji: "mi" },
        { kana: "„É†", romaji: "mu" },
        { kana: "„É°", romaji: "me" },
        { kana: "„É¢", romaji: "mo" },
        { kana: "„É§", romaji: "ya" },
        { kana: "„É¶", romaji: "yu" },
        { kana: "„É®", romaji: "yo" },
        { kana: "„É©", romaji: "ra" },
        { kana: "„É™", romaji: "ri" },
        { kana: "„É´", romaji: "ru" },
        { kana: "„É¨", romaji: "re" },
        { kana: "„É≠", romaji: "ro" },
        { kana: "„ÉØ", romaji: "wa" },
        { kana: "„É≤", romaji: "wo" },
        { kana: "„É≥", romaji: "n" },
      ];
      var dakuten = [
        { kana: "„Åå", romaji: "ga" },
        { kana: "„Åé", romaji: "gi" },
        { kana: "„Åê", romaji: "gu" },
        { kana: "„Åí", romaji: "ge" },
        { kana: "„Åî", romaji: "go" },
        { kana: "„Åñ", romaji: "za" },
        { kana: "„Åò", romaji: "ji" },
        { kana: "„Åö", romaji: "zu" },
        { kana: "„Åú", romaji: "ze" },
        { kana: "„Åû", romaji: "zo" },
        { kana: "„Å†", romaji: "da" },
        { kana: "„Å¢", romaji: "ji" },
        { kana: "„Å•", romaji: "zu" },
        { kana: "„Åß", romaji: "de" },
        { kana: "„Å©", romaji: "do" },
        { kana: "„Å∞", romaji: "ba" },
        { kana: "„Å≥", romaji: "bi" },
        { kana: "„Å∂", romaji: "bu" },
        { kana: "„Åπ", romaji: "be" },
        { kana: "„Åº", romaji: "bo" },
      ];
      var handakuten = [
        { kana: "„Å±", romaji: "pa" },
        { kana: "„Å¥", romaji: "pi" },
        { kana: "„Å∑", romaji: "pu" },
        { kana: "„Å∫", romaji: "pe" },
        { kana: "„ÅΩ", romaji: "po" },

        // Combinations (y≈çon)
        { kana: "„Åç„ÇÉ", romaji: "kya" },
        { kana: "„Åç„ÇÖ", romaji: "kyu" },
        { kana: "„Åç„Çá", romaji: "kyo" },
        { kana: "„Åé„ÇÉ", romaji: "gya" },
        { kana: "„Åé„ÇÖ", romaji: "gyu" },
        { kana: "„Åé„Çá", romaji: "gyo" },
        { kana: "„Åó„ÇÉ", romaji: "sha" },
        { kana: "„Åó„ÇÖ", romaji: "shu" },
        { kana: "„Åó„Çá", romaji: "sho" },
        { kana: "„Åò„ÇÉ", romaji: "ja" },
        { kana: "„Åò„ÇÖ", romaji: "ju" },
        { kana: "„Åò„Çá", romaji: "jo" },
        { kana: "„Å°„ÇÉ", romaji: "cha" },
        { kana: "„Å°„ÇÖ", romaji: "chu" },
        { kana: "„Å°„Çá", romaji: "cho" },
        { kana: "„Å´„ÇÉ", romaji: "nya" },
        { kana: "„Å´„ÇÖ", romaji: "nyu" },
        { kana: "„Å´„Çá", romaji: "nyo" },
        { kana: "„Å≤„ÇÉ", romaji: "hya" },
        { kana: "„Å≤„ÇÖ", romaji: "hyu" },
        { kana: "„Å≤„Çá", romaji: "hyo" },
        { kana: "„Å≥„ÇÉ", romaji: "bya" },
        { kana: "„Å≥„ÇÖ", romaji: "byu" },
        { kana: "„Å≥„Çá", romaji: "byo" },
        { kana: "„Å¥„ÇÉ", romaji: "pya" },
        { kana: "„Å¥„ÇÖ", romaji: "pyu" },
        { kana: "„Å¥„Çá", romaji: "pyo" },
        { kana: "„Åø„ÇÉ", romaji: "mya" },
        { kana: "„Åø„ÇÖ", romaji: "myu" },
        { kana: "„Åø„Çá", romaji: "myo" },
        { kana: "„Çä„ÇÉ", romaji: "rya" },
        { kana: "„Çä„ÇÖ", romaji: "ryu" },
        { kana: "„Çä„Çá", romaji: "ryo" },
      ];

      (function () {
        // script datasets
        var datasets = {
          hiragana: hiragana,
          katakana: katakana,
        };

        // start with hiragana
        var activeScript = "hiragana";

        // track used indices per script/mode
        var usedIndices = {
          hiragana: { kana: [], romaji: [] },
          katakana: { kana: [], romaji: [] },
        };

        function getCombined() {
          return datasets[activeScript];
        }

        // shorthand to access used arrays
        function usedFor(mode) {
          return usedIndices[activeScript][mode === "kana" ? "kana" : "romaji"];
        }

        function pickRandomUnique(mode) {
          var pool = [];
          var combinedLocal = getCombined();
          var used = usedFor(mode);
          for (var i = 0; i < combinedLocal.length; i++) {
            if (used.indexOf(i) === -1) pool.push(i);
          }
          if (pool.length === 0) {
            used.length = 0;
            for (var i = 0; i < combinedLocal.length; i++) pool.push(i);
          }
          var idx = pool[Math.floor(Math.random() * pool.length)];
          used.push(idx);
          return combinedLocal[idx];
        }

        var kanaBtn = document.querySelector(".kana-btn");
        var romajiBtn = document.querySelector(".romaji-btn");
        var romajiWord = document.querySelector(".romaji-word");
        var kanaAns = document.querySelector(".kana-ans");
        var kanaWord = document.querySelector(".kana-word");
        var romajiAns = document.querySelector(".romaji-ans");
        var showAnsKanaBtn = document.querySelector(".show-ans-kana");
        var showAnsRomajiBtn = document.querySelector(".show-ans-romaji");
        var kanaDiv = document.querySelector(".kana");
        var romajiDiv = document.querySelector(".romaji");

        var current = null;
        var currentSet = [];

        function pickRandomSet(n) {
          var out = [];
          var pool = getCombined().slice(0);
          n = Math.max(1, Math.min(n, pool.length));
          for (var i = 0; i < n; i++) {
            var idx = Math.floor(Math.random() * pool.length);
            out.push(pool.splice(idx, 1)[0]);
          }
          return out;
        }

        kanaBtn.addEventListener("click", function () {
          var countEl = document.querySelector(".word-count");
          var count = 1;
          if (countEl) {
            count = parseInt(countEl.value, 10) || 1;
          }
          if (count === 1) {
            currentSet = [pickRandomUnique("kana")];
          } else {
            currentSet = pickRandomSet(count);
          }
          romajiWord.textContent = currentSet
            .map(function (it) {
              return it.romaji;
            })
            .join(" ");
          kanaAns.textContent = "";
          // enable & show the kana answer button and hide the romaji answer button
          if (showAnsKanaBtn) {
            showAnsKanaBtn.disabled = false;
            showAnsKanaBtn.style.display = "inline-block";
          }
          if (showAnsRomajiBtn) {
            showAnsRomajiBtn.disabled = true;
            showAnsRomajiBtn.style.display = "none";
          }
          // hide any previous answers
          if (kanaAns) {
            kanaAns.textContent = "";
            kanaAns.style.display = "none";
          }
          if (romajiAns) {
            romajiAns.textContent = "";
            romajiAns.style.display = "none";
          }
          // show romaji prompt area, hide kana prompt area
          if (kanaDiv) kanaDiv.style.display = "none";
          if (romajiDiv) romajiDiv.style.display = "flex";
        });

        showAnsKanaBtn.addEventListener("click", function () {
          if (!currentSet || currentSet.length === 0) return;
          kanaAns.textContent = currentSet
            .map(function (it) {
              return it.kana;
            })
            .join(" ");
          kanaAns.style.display = "inline-block";
        });

        romajiBtn.addEventListener("click", function () {
          var countEl = document.querySelector(".word-count");
          var count = 1;
          if (countEl) {
            count = parseInt(countEl.value, 10) || 1;
          }
          if (count === 1) {
            currentSet = [pickRandomUnique("romaji")];
          } else {
            currentSet = pickRandomSet(count);
          }
          kanaWord.textContent = currentSet
            .map(function (it) {
              return it.kana;
            })
            .join(" ");
          // enable & show romaji answer button and hide kana answer button
          if (showAnsRomajiBtn) {
            showAnsRomajiBtn.disabled = false;
            showAnsRomajiBtn.style.display = "inline-block";
          }
          if (showAnsKanaBtn) {
            showAnsKanaBtn.disabled = true;
            showAnsKanaBtn.style.display = "none";
          }
          // hide any previous answers
          if (romajiAns) {
            romajiAns.textContent = "";
            romajiAns.style.display = "none";
          }
          if (kanaAns) {
            kanaAns.textContent = "";
            kanaAns.style.display = "none";
          }
          // show kana prompt area, hide romaji prompt area
          if (romajiDiv) romajiDiv.style.display = "none";
          if (kanaDiv) kanaDiv.style.display = "flex";
        });

        showAnsRomajiBtn.addEventListener("click", function () {
          if (!currentSet || currentSet.length === 0) return;
          romajiAns.textContent = currentSet
            .map(function (it) {
              return it.romaji;
            })
            .join(" ");
          romajiAns.style.display = "inline-block";
        });

        // Tab switching logic
        var tabs = document.querySelectorAll('.tab');
        tabs.forEach(function(tab){
          tab.addEventListener('click', function(){
            var script = tab.getAttribute('data-script');
            if (!script || script === activeScript) return;
            // update active state classes/aria
            tabs.forEach(function(t){
              t.classList.toggle('active', t === tab);
              t.setAttribute('aria-selected', t === tab ? 'true' : 'false');
            });
            activeScript = script;
            // reset current set and UI
            currentSet = [];
            romajiWord.textContent = '';
            kanaAns.textContent = '';
            kanaWord.textContent = '';
            romajiAns.textContent = '';
            if (showAnsKanaBtn) { showAnsKanaBtn.disabled = true; showAnsKanaBtn.style.display = 'none'; }
            if (showAnsRomajiBtn) { showAnsRomajiBtn.disabled = true; showAnsRomajiBtn.style.display = 'none'; }
            if (kanaDiv) kanaDiv.style.display = '';
            if (romajiDiv) romajiDiv.style.display = '';
          });
        });

        // initialize
        romajiWord.textContent = "";
        kanaAns.textContent = "";
        kanaWord.textContent = "";
        romajiAns.textContent = "";
        showAnsKanaBtn.disabled = true;
        showAnsRomajiBtn.disabled = true;
        // hide show-answer buttons and answers initially (CSS already hides, ensure inline hiding too)
        if (showAnsKanaBtn) showAnsKanaBtn.style.display = "none";
        if (showAnsRomajiBtn) showAnsRomajiBtn.style.display = "none";
        if (kanaAns) kanaAns.style.display = "none";
        if (romajiAns) romajiAns.style.display = "none";
        // ensure both panels visible initially
        if (kanaDiv) kanaDiv.style.display = "";
        if (romajiDiv) romajiDiv.style.display = "";
      })();
    </script>
  </body>
</html>
